# 🌐 Network Basics 

---

## 네트워크 기초 개념

### 네트워크(Network)
데이터를 송수신하는 **기기 간 정보와 자원을 공유할 수 있게 하는 시스템**

### 노드(Node)
네트워크에서 데이터를 주고받는 **모든 장치**  
(컴퓨터, 라우터, 스위치, 서버 등)

### 호스트(Host)
네트워크 상에서 **데이터 송수신의 주체가 되는 장치**  
→ IP 주소를 가짐

---

## 네트워크 종류

| 구분 | 명칭 | 설명 |
|------|------|------|
| **LAN** | Local Area Network | 근거리 네트워크 (건물, 학교 등) |
| **WLAN** | Wireless LAN | 무선 LAN (Wi-Fi) |
| **VLAN** | Virtual LAN | 하나의 물리적 네트워크를 **논리적으로 분리** |
| **MAN** | Metropolitan Area Network | 도시 단위 네트워크 (캠퍼스, 회사 등) |
| **WAN** | Wide Area Network | 대륙 간/광역 네트워크 (인터넷) |

---

## 네트워크 장비

### 💡 NIC (Network Interface Card)
- 네트워크 연결을 담당하는 **하드웨어 구성 요소**
- **MAC 주소**를 고유 식별자로 가짐

### 💡 MAC (Media Access Control Address)
- 네트워크 장치의 **물리적 주소 (48비트)**  
  예: `00:1A:2B:3C:4D:5E`  
- NIC에 **하드웨어적으로 내장**

---

### Repeater (리피터)
- **신호 증폭기**  
- 약해진 신호를 재생해 더 먼 거리로 전송 가능

---

### Hub (허브)
- 데이터를 **모든 장치로 브로드캐스트** 전송  
- 트래픽 관리 X, 충돌 발생 가능  
- 설치 간편하지만 효율 낮음

---

### Switch (스위치)
- **MAC 주소 기반**으로 목적지 장치에만 데이터 전달  
- 데이터 충돌 없음, 효율적 트래픽 관리  
- 대부분의 LAN에서 기본 장비로 사용됨

---

### Router (라우터)
- **IP 주소 기반**으로 네트워크 간 데이터 전달  
- LAN ↔ WAN 등 서로 다른 네트워크 간 라우팅 수행

---

### Bridge (브리지)
- 두 개 이상의 LAN을 연결  
- **MAC 주소 기반으로 필터링**하여 필요한 세그먼트로만 데이터 전달

---

### Gateway (게이트웨이)
- **서로 다른 네트워크 간 통신**을 가능하게 함  
- **프로토콜 변환 역할** 수행  
- 외부 네트워크(인터넷)과의 연결에 사용

---

## 주요 네트워크 용어

### Port
- 데이터가 들어오거나 나가는 **논리적 통신 지점**
- 예: `HTTP(80)`, `HTTPS(443)`, `SSH(22)`

### Broadcast
- 하나의 노드가 **전체 네트워크로 데이터를 전송**  
- 예: ARP(Address Resolution Protocol) 요청

---

## NAT (Network Address Translation)

> 내부 사설 IP를 외부 공인 IP로 변환하여 인터넷 통신을 가능하게 하는 기술  
> 하나의 공인 IP로 여러 내부 장치가 외부 네트워크에 접근할 수 있음

---

### 💡 NAT의 기본 개념

| 구분 | 내부 주소 (Private IP) | 변환 후 (Public IP) | 설명 |
|------|------------------------|---------------------|------|
| 송신 | 192.168.0.2:5001 | 203.0.113.5:62000 | 사설 → 공인 IP 변환 |
| 수신 | 203.0.113.5:62000 | 192.168.0.2:5001 | 응답 시 역변환 (매핑 테이블 참고) |

NAT 장비는 이 매핑 정보를 **NAT 테이블**에 저장하고, 외부로 나가는 요청과 들어오는 응답을 IP와 포트 기반으로 관리함.

---

## NAT의 종류

| NAT 종류 | 외부 통신 허용 범위 | 특징 | 활용 예시 | 보안성 |
|-----------|--------------------|--------|------------|---------|
| **Full Cone NAT** | 모든 외부 IP/포트에서 접근 가능 | 단 한 번 매핑되면 누구나 접근 가능 | P2P, 게임 | 낮음 |
| **Restricted Cone NAT** | 내부에서 접근한 외부 IP만 허용 | IP 단위로 접근 제한 | 일반 가정용 공유기 | 중간 |
| **Port Restricted Cone NAT** | 내부에서 접근한 IP **+ 포트 조합**만 허용 | IP와 포트 모두 일치해야 접근 가능 | 회사/보안 네트워크 | 높음 |
| **Symmetric NAT** | 목적지마다 새로운 매핑 생성 | 매 요청 시 매핑 다름 → 직접 연결 어려움 | 기업망, 방화벽 환경 | 매우 높음 |

---

### NAT 매핑 테이블 예시

#### Full Cone NAT
> 매핑 정보 1개만 생성되고, 모든 외부 대상이 접근 가능

| 내부 IP:Port | 외부 IP:Port | 대상 IP:Port | 접근 가능 여부 |
|---------------|---------------|----------------|----------------|
| 192.168.0.2:5001 | 203.0.113.5:62000 | 누구든 가능 | ✅ 가능 |

→ 동일 포트를 모든 외부 노드가 접근 가능 (보안 약함)

---

#### Restricted Cone NAT
> 내부가 먼저 요청한 **IP**만 접근 가능

| 내부 IP:Port | 외부 IP:Port | 대상 IP:Port | 접근 가능 여부 |
|---------------|---------------|----------------|----------------|
| 192.168.0.2:5001 | 203.0.113.5:62000 | 198.51.100.10:80 | ✅ 가능 |
| 192.168.0.2:5001 | 203.0.113.5:62000 | 203.0.113.77:443 | ❌ 불가 |

→ 동일 포트라도 **다른 IP**에서는 접근 불가

---

#### Port Restricted Cone NAT
> 내부가 요청한 **IP + Port 조합**이 일치해야 접근 가능

| 내부 IP:Port | 외부 IP:Port | 대상 IP:Port | 접근 가능 여부 |
|---------------|---------------|----------------|----------------|
| 192.168.0.2:5001 | 203.0.113.5:62000 | 198.51.100.10:80 | ✅ 가능 |
| 192.168.0.2:5001 | 203.0.113.5:62000 | 198.51.100.10:443 | ❌ 불가 |

→ 외부 대상의 **포트까지 일치해야** 재전송 가능

---

#### Symmetric NAT
> 목적지마다 새로운 매핑이 생성됨 → 직접 연결 어려움

| 내부 IP:Port | 외부 IP:Port | 대상 IP:Port | 접근 가능 여부 |
|---------------|---------------|----------------|----------------|
| 192.168.0.2:5001 | 203.0.113.5:62000 | 198.51.100.10:80 | ✅ 가능 |
| 192.168.0.2:5001 | 203.0.113.5:63000 | 198.51.100.20:443 | ✅ 가능 (새 매핑) |
| 192.168.0.2:5001 | 203.0.113.5:62000 | 198.51.100.20:443 | ❌ 불가 |

→ 목적지별로 포트가 새로 할당되어 **P2P·WebRTC 연결 어려움**

---

### NAT 유형 요약

| 구분 | 매핑 방식 | 외부 접근 허용 | 보안성 | P2P 호환성 |
|------|-------------|----------------|----------|--------------|
| Full Cone | 1:1 고정 | 전체 허용 | 낮음 | ✅ |
| Restricted Cone | IP 단위 제한 | 일부 허용 | 중간 | ✅ |
| Port-Restricted Cone | IP+Port 단위 제한 | 제한적 | 높음 | ⚠️ 제한적 |
| Symmetric | 목적지별 새 매핑 | 매우 제한적 | 매우 높음 | ❌ |

---

## Port Forwarding
- **외부에서 내부 네트워크 장치 접근을 허용**하는 설정  
- NAT 환경에서 특정 포트를 지정해 내부 서버로 연결 가능  
  예: `공인IP:8080 → 내부IP:80`

---

## VPN (Virtual Private Network)
- 인터넷 상에서 **사설 네트워크를 구성하는 기술**
- 암호화된 터널링을 통해 **보안 통신** 보장  
- 원격 접속, 내부망 접근 등에 사용

---

## ✅ 정리

| 구분 | 핵심 역할 | 기반 주소 | 특징 |
|------|------------|------------|------|
| Hub | 단순 데이터 분배 | X | 모든 장치로 전송 |
| Switch | 장치 간 데이터 전달 | MAC | LAN 내 효율적 통신 |
| Router | 네트워크 간 라우팅 | IP | LAN ↔ WAN 연결 |
| Bridge | LAN 간 연결 | MAC | 세그먼트 분할 |
| Gateway | 네트워크 간 변환 | 프로토콜 | 외부 통신 중계 |
